--$ sqlite3 data.db .dump > schema.sql
PRAGMA foreign_keys=ON;
BEGIN TRANSACTION;


DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS FOLLOW;
DROP TABLE IF EXISTS TWEETS;


/* Create a table called USERS */
CREATE TABLE USERS(
    PK_USERNAME VARCHAR PRIMARY KEY, 
    EMAIL VARCHAR NOT NULL, 
    PASSWORD VARCHAR NOT NULL
);


/* Create few users in this table */
INSERT INTO USERS VALUES('a', 'a@a.com', 'pbkdf2:sha256:150000$FAKnujDH$b8d780c1fcbc4eaa5e9d9f9bc9e1046100bb22e04cc58d05c0b9a53746ec4942');
INSERT INTO USERS VALUES('b', 'b@b.com', 'pbkdf2:sha256:150000$CZP4YD51$e8016b6bfacf95266944f500946392810b1669d6cd4bc5d5f13e0f5bf7c779d2');
INSERT INTO USERS VALUES('c', 'c@c.com', 'pbkdf2:sha256:150000$dodjKvIe$950968c0302575bff1936f9a49a14fb194a224e41d9b7a6a426ac22ef9ac85de');
INSERT INTO USERS VALUES('d', 'd@d.com', 'pbkdf2:sha256:150000$7H0LmQlj$351c9b0a097bf1ed0763e6e94c032bb65914b0b6c3604e4130323698bd360184');
INSERT INTO USERS VALUES('e', 'e@e.com', 'pbkdf2:sha256:150000$LpuqQyiz$6448a105414f1e53859dbca7121475fb831eb652fa19bd21626020d3eef3c050');
INSERT INTO USERS VALUES('f', 'f@f.com', 'pbkdf2:sha256:150000$uzdwJVE1$f3f1e55ab13c2ea4d246f6a751bbb4a91dec477789c814f95b9747cfaf1d9880');


/* Create a table called FOLLOW */
CREATE TABLE FOLLOW(
    FOLLOWERS VARCHAR NOT NULL, 
    FK_USER VARCHAR NOT NULL,
    FOREIGN KEY(FK_USER) REFERENCES USERS(PK_USERNAME)
);


/* Create few follows in this table */
INSERT INTO FOLLOW VALUES('b', 'a');
INSERT INTO FOLLOW VALUES('c', 'a');
INSERT INTO FOLLOW VALUES('d','a');
INSERT INTO FOLLOW VALUES('a','b');
INSERT INTO FOLLOW VALUES('c','b');
INSERT INTO FOLLOW VALUES('a','c');
INSERT INTO FOLLOW VALUES('e','d');
INSERT INTO FOLLOW VALUES('f','d');


/* Create a table called TWEETS */
CREATE TABLE TWEETS(
    TWEET TEXT NOT NULL, 
    DAY_OF VARCHAR NOT NULL,
    FK_USERS VARCHAR NOT NULL,
    FOREIGN KEY(FK_USER) REFERENCES USERS(PK_USERNAME)
);

/* Create few tweets in this table */
INSERT INTO TWEETS VALUES('2hello all', '2020-10-05 10:37:00', 'a');
INSERT INTO TWEETS VALUES('8goodbye all', '2020-05-05 23:59:59', 'a');
INSERT INTO TWEETS VALUES('7b is cool', '2020-09-28 05:58:59', 'b');
INSERT INTO TWEETS VALUES('9b is wack', '2019-10-05 14:12:35', 'c');
INSERT INTO TWEETS VALUES('4c is cool', '2020-10-04 17:12:35', 'c');
INSERT INTO TWEETS VALUES('12my time machine worked', '2059-10-05 14:12:35', 'e');
INSERT INTO TWEETS VALUES('1hello a', '2020-10-05 14:12:35', 'd');
INSERT INTO TWEETS VALUES('10d is best', '2014-10-05 14:12:35', 'd');
INSERT INTO TWEETS VALUES('6microblogging service similar to twitter', '2020-10-01 01:43:16', 'e');
INSERT INTO TWEETS VALUES('3making them api', '2020-10-04 17:12:36', 'e');
INSERT INTO TWEETS VALUES('5who following me', '2020-10-04 17:12:34', 'e');
INSERT INTO TWEETS VALUES('11how i get to 1924', '1924-10-05 14:12:35', 'f');


COMMIT;
